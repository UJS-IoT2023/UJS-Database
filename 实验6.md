# 数据库原理 实验六

1. 检索L1从书店S1购买的图书的书号及其册数；

```sql
SELECT book_id, quantity
FROM book_distribution
WHERE library_id = 'L1' AND shop_id = 'S1';
```

| book\_id | quantity |
| :--- | :--- |
| B2 | 5 |


2. 检索馆址在“上海”的图书馆及其电话号码；

```sql
SELECT library_id, library_name, tel
FROM library
WHERE city = '上海';
```

| library\_id | library\_name | tel |
| :--- | :--- | :--- |
| L1 | 上海图书馆 | 205800 |
| L2 | 上海外文书店 | 310310 |


3. 检索L4收藏图书的书名；

```sql
SELECT DISTINCT b.book_name
FROM book_distribution bd
JOIN book b ON bd.book_id = b.book_id
WHERE bd.library_id = 'L4';
```

| book\_name |
| :--- |
| 操作系统 |
| 计算机原理 |

4. 检索S3发行的图书书名及数量；

```sql
SELECT b.book_name, bd.quantity
FROM book_distribution bd
JOIN book b ON bd.book_id = b.book_id
WHERE bd.shop_id = 'S3';
```

| book\_name | quantity |
| :--- | :--- |
| 数据库设计 | 5 |
| 数据库原理 | 10 |

5. 检索收藏图书“数据库设计”的馆名。

```sql
SELECT DISTINCT l.library_name
FROM book_distribution bd
JOIN library l ON bd.library_id = l.library_id
JOIN book b ON bd.book_id = b.book_id
WHERE b.book_name = '数据库设计';
```

| library\_name |
| :--- |
| 上海图书馆 |

6. 检索没有购买上海新华书店出售的图书的图书馆号LNO。

```sql
SELECT DISTINCT l.library_id
FROM library l
WHERE NOT EXISTS (
    SELECT 1
    FROM book_distribution bd
    JOIN shop s ON bd.shop_id = s.shop_id
    WHERE bd.library_id = l.library_id
    AND s.shop_name = '上海新华书店'
);
```

| library\_id |
| :--- |
| L2 |
| L3 |
| L4 |
