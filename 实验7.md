# 数据库原理 实验7

1. 将B5的单价改为6.00元

    ```sql
    UPDATE book
    SET price = 6
    WHERE book_id = 'B5';
    ```

    **output**

    ```
    [2025-11-24 23:14:43] 1 row affected in 12 ms
    ```

2. 删去图书B2及相应的发行记录

    ```sql
    DELETE FROM book_distribution
    WHERE book_id = 'B2';

    DELETE FROM book
    WHERE book_id = 'B2';
    ```

    **output**

    ```
    [2025-11-24 23:18:29] completed in 66 ms
    ```

3. 修改江苏新华书店的图书的数量为50

    ```sql
    UPDATE book_distribution
    SET quantity = 50
    WHERE shop_id = 'S5';
    ```

    **output**

    ```
    [2025-11-24 23:23:17] 4 rows affected in 15 ms
    ```

4. 为图书发行LBS表的QTY字段设计CHECK约束： 0<QTY<100

    ```sql
    ALTER TABLE book_distribution
    ADD CONSTRAINT chk_quantity CHECK (quantity > 0 AND quantity < 100);
    ```

    **output**

    ```
    [2025-11-24 23:20:30] completed in 51 ms
    ```

5. 将(B6,人工智能库论,4.5)加入图书B

    ```sql
    INSERT INTO book (book_id, book_name, price)
    VALUES ('B6', '人工智能库论', 4.50);
    ```

    **output**

    ```
    [2025-11-24 23:24:20] 1 row affected in 17 ms
    ```

6. 实现对LBS表的操作权限管理的使用。

    ```sql
    CREATE USER test_user;

    -- Add permission to user
    GRANT SELECT, INSERT, UPDATE ON book_distribution TO test_user;

    -- Remove permission
    REVOKE UPDATE ON book_distribution FROM test_user;
    ```